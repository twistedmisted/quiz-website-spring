<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"><head>
    <title th:text="#{list-users}"></title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/admin.css}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>

<div class="users-list">
    <table class="iksweb">
        <caption class="title-list" th:text="#{list-users}"></caption>
        <tbody>
        <tr>
            <th id="login" th:text="#{login}">login</th>
            <th id="email" th:text="#{email}">email</th>
            <th id="access-level" th:text="#{access-level}">access-level</th>
            <th id="start" th:text="#{start}">start</th>
            <th id="actions" th:text="#{actions}" colspan="3">actions</th>
        </tr>
        <th:block th:each="user : ${userPage.content}">
            <tr>
                <td th:text="${user.login}">login</td>
                <td th:text="${user.email}">email</td>
                <td th:text="${user.accessLevel}">accessLevel</td>
                <td th:text="${user.state}">state</td>
                <td><a th:href="@{/{id}/edit(id=${user.id})}">Edit</a></td>
                <td>
                    <a th:if="${user.state == 'normal'}" th:href="@{/{id}/block(id=${user.id})}">Block</a>
                    <a th:unless="${user.state == 'normal'}" th:href="@{/{id}/unblock(id=${user.id})}">Unblock</a>
                </td>
                <td>
                    <a th:href="@{/{id}/delete(id=${user.id})}">Delete</a>
                </td>
            </tr>
        </th:block>
        </tbody>
    </table>
        <div class="btns" th:with="currentPage=${userPage.number + 1}">
            <a th:if="${currentPage > 1}" class="element btn"
               th:href="@{/user/all(page=${currentPage - 1})}" th:text="#{back}"></a>
            <a th:unless="${currentPage > 1}" class="element btn disabled" th:text="#{back}"></a>
            <p class="element" th:text="${currentPage}"></p>
            <a th:if="${currentPage < userPage.totalPages}" class="element btn"
               th:href="@{/user/all(page=${currentPage + 1})}" th:text="#{next}"></a>
            <a th:unless="${currentPage < userPage.totalPages}" class="element btn disabled" th:text="#{next}"></a>
        </div>
        <div class="btns">
            <a class="btn" href="/admin" th:text="#{admin}"></a>
        </div>
</div>

</body>
<script text="text/javascript">
    $(document).ready(function () {
        $("#locales").change(function () {
            var selectedOption = $('#locales').val();
            if (selectedOption != '') {
                window.location.replace('international?lang=' + selectedOption);
            }
        });
    });
</script>
</html>